<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CSharpCAD: /home/brian/work/cscad/CSharpCad/CSharpCAD/src/primitives/triangle.cs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CSharpCAD
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/home/brian/work/cscad/CSharpCad/CSharpCAD/src/primitives/triangle.cs</div>  </div>
</div><!--header-->
<div class="contents">
<p>Construct a triangle in two dimensional space from the given options.</p>
<p>The triangle is always constructed CCW from the origin, [0, 0, 0]. </p><dl class="section see"><dt>See also</dt><dd><a href="https://www.mathsisfun.com/algebra/trig-solving-triangles.html">https://www.mathsisfun.com/algebra/trig-solving-triangles.html</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">{Object}</td><td>[options] - options for construction </td></tr>
    <tr><td class="paramname">{String}</td><td>[options.type="SSS" - type of triangle to construct; A ~ angle, S ~ side </td></tr>
    <tr><td class="paramname">{Array}</td><td>[options.values=[1,1,1]] - angle (radians) of corners or length of sides </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>{geom2} new 2D geometry @alias module:modeling/primitives.triangle</dd></dl>
<p>var myshape = triangle({type: "AAS", values: [degToRad(62), degToRad(35), 7]})</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>CSharpCAD;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">partial class </span><a name="_a0"></a><a class="code" href="classCSCAD.html">CSCAD</a></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// returns angle C</span></div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">double</span> solveAngleFromSSS(<span class="keywordtype">double</span> a, <span class="keywordtype">double</span> b, <span class="keywordtype">double</span> c) =&gt; Math.Acos(((a * a) + (b * b) - (c * c)) / (2 * a * b));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// returns side c</span></div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">double</span> solveSideFromSAS(<span class="keywordtype">double</span> a, <span class="keywordtype">double</span> <a name="_a1"></a><a class="code" href="classC.html">C</a>, <span class="keywordtype">double</span> b)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="classC.html">C</a> &gt; CSharpCAD.C.<a name="a2"></a><a class="code" href="classC.html#ae993bf2ff5b43783276e1a438de32866">NEPS</a>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> Math.Sqrt(a * a + b * b - 2 * a * b * Math.Cos(<a class="code" href="classC.html">C</a>));</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Explained in https://www.nayuki.io/page/numerically-stable-law-of-cosines</span></div>
<div class="line">        <span class="keywordflow">return</span> Math.Sqrt((a - b) * (a - b) + a * b * <a class="code" href="classC.html">C</a> * <a class="code" href="classC.html">C</a> * (1 - <a class="code" href="classC.html">C</a> * <a class="code" href="classC.html">C</a> / 12));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// AAA is when three angles of a triangle, but no sides</span></div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <a name="_a3"></a><a class="code" href="classGeom2.html">Geom2</a> solveAAA(<a name="_a4"></a><a class="code" href="structVec3.html">Vec3</a> angles)</div>
<div class="line">    {</div>
<div class="line">        var eps = Math.Abs(angles.<a name="a5"></a><a class="code" href="structVec3.html#a370f76b5927f22615549783fda6db7f4">x</a> + angles.<a name="a6"></a><a class="code" href="structVec3.html#aedd69e199bb1e2991e69278e9651f35d">y</a> + angles.<a name="a7"></a><a class="code" href="structVec3.html#a358e80aae3a48a98deb44fe7984038f7">z</a> - Math.PI);</div>
<div class="line">        <span class="keywordflow">if</span> (eps &gt; CSharpCAD.C.NEPS) <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;AAA triangles require angles that sum to PI&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        var A = angles.<a class="code" href="structVec3.html#a370f76b5927f22615549783fda6db7f4">x</a>;</div>
<div class="line">        var B = angles.<a class="code" href="structVec3.html#aedd69e199bb1e2991e69278e9651f35d">y</a>;</div>
<div class="line">        var <a class="code" href="classC.html">C</a> = Math.PI - A - B;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Note: This is not 100% proper but...</span></div>
<div class="line">        <span class="comment">// default the side c length to 1</span></div>
<div class="line">        <span class="comment">// solve the other lengths</span></div>
<div class="line">        var c = 1;</div>
<div class="line">        var a = (c / Math.Sin(<a class="code" href="classC.html">C</a>)) * Math.Sin(A);</div>
<div class="line">        var b = (c / Math.Sin(<a class="code" href="classC.html">C</a>)) * Math.Sin(B);</div>
<div class="line">        <span class="keywordflow">return</span> createTriangle(A, B, <a class="code" href="classC.html">C</a>, a, b, c);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// AAS is when two angles and one side are known, and the side is not between the angles</span></div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classGeom2.html">Geom2</a> solveAAS(<a class="code" href="structVec3.html">Vec3</a> values)</div>
<div class="line">    {</div>
<div class="line">        var A = values.<a class="code" href="structVec3.html#a370f76b5927f22615549783fda6db7f4">x</a>;</div>
<div class="line">        var B = values.<a class="code" href="structVec3.html#aedd69e199bb1e2991e69278e9651f35d">y</a>;</div>
<div class="line">        var <a class="code" href="classC.html">C</a> = Math.PI + CSharpCAD.C.<a class="code" href="classC.html#ae993bf2ff5b43783276e1a438de32866">NEPS</a> - A - B;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="classC.html">C</a> &lt; CSharpCAD.C.<a class="code" href="classC.html#ae993bf2ff5b43783276e1a438de32866">NEPS</a>) <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;AAS triangles require angles that sum to PI&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        var a = values.<a class="code" href="structVec3.html#a358e80aae3a48a98deb44fe7984038f7">z</a>;</div>
<div class="line">        var b = (a / Math.Sin(A)) * Math.Sin(B);</div>
<div class="line">        var c = (a / Math.Sin(A)) * Math.Sin(<a class="code" href="classC.html">C</a>);</div>
<div class="line">        <span class="keywordflow">return</span> createTriangle(A, B, <a class="code" href="classC.html">C</a>, a, b, c);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// ASA is when two angles and the side between the angles are known</span></div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classGeom2.html">Geom2</a> solveASA(<a class="code" href="structVec3.html">Vec3</a> values)</div>
<div class="line">    {</div>
<div class="line">        var A = values.<a class="code" href="structVec3.html#a370f76b5927f22615549783fda6db7f4">x</a>;</div>
<div class="line">        var B = values.<a class="code" href="structVec3.html#a358e80aae3a48a98deb44fe7984038f7">z</a>;</div>
<div class="line">        var <a class="code" href="classC.html">C</a> = Math.PI + CSharpCAD.C.<a class="code" href="classC.html#ae993bf2ff5b43783276e1a438de32866">NEPS</a> - A - B;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="classC.html">C</a> &lt; CSharpCAD.C.<a class="code" href="classC.html#ae993bf2ff5b43783276e1a438de32866">NEPS</a>) <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;ASA triangles require angles that sum to PI&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        var c = values.<a class="code" href="structVec3.html#aedd69e199bb1e2991e69278e9651f35d">y</a>;</div>
<div class="line">        var a = (c / Math.Sin(<a class="code" href="classC.html">C</a>)) * Math.Sin(A);</div>
<div class="line">        var b = (c / Math.Sin(<a class="code" href="classC.html">C</a>)) * Math.Sin(B);</div>
<div class="line">        <span class="keywordflow">return</span> createTriangle(A, B, <a class="code" href="classC.html">C</a>, a, b, c);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// SAS is when two sides and the angle between them are known</span></div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classGeom2.html">Geom2</a> solveSAS(<a class="code" href="structVec3.html">Vec3</a> values)</div>
<div class="line">    {</div>
<div class="line">        var c = values.<a class="code" href="structVec3.html#a370f76b5927f22615549783fda6db7f4">x</a>;</div>
<div class="line">        var B = values.<a class="code" href="structVec3.html#aedd69e199bb1e2991e69278e9651f35d">y</a>;</div>
<div class="line">        var a = values.<a class="code" href="structVec3.html#a358e80aae3a48a98deb44fe7984038f7">z</a>;</div>
<div class="line"> </div>
<div class="line">        var b = solveSideFromSAS(c, B, a);</div>
<div class="line"> </div>
<div class="line">        var A = solveAngleFromSSS(b, c, a); <span class="comment">// solve for A</span></div>
<div class="line">        var <a class="code" href="classC.html">C</a> = Math.PI - A - B;</div>
<div class="line">        <span class="keywordflow">return</span> createTriangle(A, B, <a class="code" href="classC.html">C</a>, a, b, c);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// SSA is when two sides and an angle that is not the angle between the sides are known</span></div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classGeom2.html">Geom2</a> solveSSA(<a class="code" href="structVec3.html">Vec3</a> values)</div>
<div class="line">    {</div>
<div class="line">        var c = values.<a class="code" href="structVec3.html#a370f76b5927f22615549783fda6db7f4">x</a>;</div>
<div class="line">        var a = values.<a class="code" href="structVec3.html#aedd69e199bb1e2991e69278e9651f35d">y</a>;</div>
<div class="line">        var <a class="code" href="classC.html">C</a> = values.<a class="code" href="structVec3.html#a358e80aae3a48a98deb44fe7984038f7">z</a>;</div>
<div class="line"> </div>
<div class="line">        var A = Math.Asin(a * Math.Sin(<a class="code" href="classC.html">C</a>) / c);</div>
<div class="line">        var B = Math.PI - A - <a class="code" href="classC.html">C</a>;</div>
<div class="line"> </div>
<div class="line">        var b = (c / Math.Sin(<a class="code" href="classC.html">C</a>)) * Math.Sin(B);</div>
<div class="line">        <span class="keywordflow">return</span> createTriangle(A, B, <a class="code" href="classC.html">C</a>, a, b, c);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// SSS is when we know three sides of the triangle</span></div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classGeom2.html">Geom2</a> solveSSS(<a class="code" href="structVec3.html">Vec3</a> lengths)</div>
<div class="line">    {</div>
<div class="line">        var a = lengths.<a class="code" href="structVec3.html#aedd69e199bb1e2991e69278e9651f35d">y</a>;</div>
<div class="line">        var b = lengths.<a class="code" href="structVec3.html#a358e80aae3a48a98deb44fe7984038f7">z</a>;</div>
<div class="line">        var c = lengths.<a class="code" href="structVec3.html#a370f76b5927f22615549783fda6db7f4">x</a>;</div>
<div class="line">        <span class="keywordflow">if</span> (((a + b) &lt;= c) || ((b + c) &lt;= a) || ((c + a) &lt;= b))</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;SSS triangle is incorrect, as the longest side is longer than the sum of the other sides&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        var A = solveAngleFromSSS(b, c, a); <span class="comment">// solve for A</span></div>
<div class="line">        var B = solveAngleFromSSS(c, a, b); <span class="comment">// solve for B</span></div>
<div class="line">        var <a class="code" href="classC.html">C</a> = Math.PI - A - B;</div>
<div class="line">        <span class="keywordflow">return</span> createTriangle(A, B, <a class="code" href="classC.html">C</a>, a, b, c);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classGeom2.html">Geom2</a> createTriangle(<span class="keywordtype">double</span> A, <span class="keywordtype">double</span> B, <span class="keywordtype">double</span> <a class="code" href="classC.html">C</a>, <span class="keywordtype">double</span> a, <span class="keywordtype">double</span> b, <span class="keywordtype">double</span> c)</div>
<div class="line">    {</div>
<div class="line">        var p0 = <span class="keyword">new</span> <a name="_a8"></a><a class="code" href="structVec2.html">Vec2</a>(0, 0); <span class="comment">// everything starts from 0, 0</span></div>
<div class="line">        var p1 = <span class="keyword">new</span> <a class="code" href="structVec2.html">Vec2</a>(c, 0);</div>
<div class="line">        var p2 = <span class="keyword">new</span> <a class="code" href="structVec2.html">Vec2</a>(a, 0);</div>
<div class="line">        p2 = p2.Rotate(<span class="keyword">new</span> <a class="code" href="structVec2.html">Vec2</a>(0, 0), Math.PI - B).Add(p1);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classGeom2.html">Geom2</a>(<span class="keyword">new</span> List&lt;Vec2&gt; { p0, p1, p2 });</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classGeom2.html">Geom2</a> Triangle(<span class="keywordtype">string</span> type = <span class="stringliteral">&quot;SSS&quot;</span>, <a class="code" href="structVec3.html">Vec3</a>? values = <span class="keyword">null</span>)</div>
<div class="line">    {</div>
<div class="line">        var _values = values ?? <span class="keyword">new</span> <a class="code" href="structVec3.html">Vec3</a>(1, 1, 1);</div>
<div class="line"> </div>
<div class="line">        type = type.ToUpper();</div>
<div class="line">        <span class="keywordflow">if</span> (!((type[0] == <span class="charliteral">&#39;A&#39;</span> || type[0] == <span class="charliteral">&#39;S&#39;</span>) &amp;&amp;</div>
<div class="line">              (type[1] == <span class="charliteral">&#39;A&#39;</span> || type[1] == <span class="charliteral">&#39;S&#39;</span>) &amp;&amp;</div>
<div class="line">              (type[2] == <span class="charliteral">&#39;A&#39;</span> || type[2] == <span class="charliteral">&#39;S&#39;</span>))) <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Triangle type must contain three letters: A or S&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (_values.x &lt; 0 || _values.y &lt; 0 || _values.z &lt; 0) <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Triangle values must be greater than zero.&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">switch</span> (type)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;AAA&quot;</span>:</div>
<div class="line">                <span class="keywordflow">return</span> solveAAA(_values);</div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;AAS&quot;</span>:</div>
<div class="line">                <span class="keywordflow">return</span> solveAAS(_values);</div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;ASA&quot;</span>:</div>
<div class="line">                <span class="keywordflow">return</span> solveASA(_values);</div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;SAS&quot;</span>:</div>
<div class="line">                <span class="keywordflow">return</span> solveSAS(_values);</div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;SSA&quot;</span>:</div>
<div class="line">                <span class="keywordflow">return</span> solveSSA(_values);</div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;SSS&quot;</span>:</div>
<div class="line">                <span class="keywordflow">return</span> solveSSS(_values);</div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Invalid triangle type&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclassCSCAD_html"><div class="ttname"><a href="classCSCAD.html">CSCAD</a></div><div class="ttdoc">CSCAD contains the static methods most commonly used in producing geometries.</div><div class="ttdef"><b>Definition:</b> amf-serializer.cs:18</div></div>
<div class="ttc" id="aclassC_html"><div class="ttname"><a href="classC.html">C</a></div><div class="ttdoc">Constants.</div><div class="ttdef"><b>Definition:</b> Constants.cs:5</div></div>
<div class="ttc" id="aclassC_html_ae993bf2ff5b43783276e1a438de32866"><div class="ttname"><a href="classC.html#ae993bf2ff5b43783276e1a438de32866">C.NEPS</a></div><div class="ttdeci">const double NEPS</div><div class="ttdoc">Normal vectors require a special EPS.</div><div class="ttdef"><b>Definition:</b> Constants.cs:23</div></div>
<div class="ttc" id="aclassGeom2_html"><div class="ttname"><a href="classGeom2.html">Geom2</a></div><div class="ttdoc">Represents a 2D geometry consisting of an array of sides.</div><div class="ttdef"><b>Definition:</b> Geom2.cs:5</div></div>
<div class="ttc" id="astructVec2_html"><div class="ttname"><a href="structVec2.html">Vec2</a></div><div class="ttdoc">A vector of 2 coordinates.</div><div class="ttdef"><b>Definition:</b> Vec2.cs:6</div></div>
<div class="ttc" id="astructVec3_html"><div class="ttname"><a href="structVec3.html">Vec3</a></div><div class="ttdoc">A vector of 3 coordinates.</div><div class="ttdef"><b>Definition:</b> Vec3.cs:6</div></div>
<div class="ttc" id="astructVec3_html_a358e80aae3a48a98deb44fe7984038f7"><div class="ttname"><a href="structVec3.html#a358e80aae3a48a98deb44fe7984038f7">Vec3.z</a></div><div class="ttdeci">readonly double z</div><div class="ttdoc">Coordinate.</div><div class="ttdef"><b>Definition:</b> Vec3.cs:12</div></div>
<div class="ttc" id="astructVec3_html_a370f76b5927f22615549783fda6db7f4"><div class="ttname"><a href="structVec3.html#a370f76b5927f22615549783fda6db7f4">Vec3.x</a></div><div class="ttdeci">readonly double x</div><div class="ttdoc">Coordinate.</div><div class="ttdef"><b>Definition:</b> Vec3.cs:8</div></div>
<div class="ttc" id="astructVec3_html_aedd69e199bb1e2991e69278e9651f35d"><div class="ttname"><a href="structVec3.html#aedd69e199bb1e2991e69278e9651f35d">Vec3.y</a></div><div class="ttdeci">readonly double y</div><div class="ttdoc">Coordinate.</div><div class="ttdef"><b>Definition:</b> Vec3.cs:10</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
